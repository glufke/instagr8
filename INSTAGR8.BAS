10 CLEAR 800
20 REM Developed by Thomas Glufke
30 REM Complete Sources: github.com/glufke/instagr8
40 REM Requires GR8NET cartridge
50 REM ------ CONFIGURE HERE ------
60 MAXFILES=2
70  SV$="glufke.ddns.net"
80  SP$="8080"
90  F$="/instagr8.url"
100 GOSUB 760
110 SV$=MID$(F$,1,INSTR(F$,":")-1)
120 SP$=MID$(F$,INSTR(F$,":")+1)
130  REM ----------------------------
140 CALL NETSETHOST( SV$ )
150 CALL NETSETPORT( VAL(SP$) )
160 VE=PEEK(&H2D)+1:VA=0
170 IF VE>2 THEN VE=2
180 S$= MID$(STR$(INT(RND(-TIME)*100000!)) ,2)
190 A$="/instagr8/server/msxinsta.php?s="+S$
200 SCREEN0:COLOR 11,1,1:KEY OFF:WIDTH 40
210 PRINT"MSX InstaGR8 - The Instagram for MSX"
230 LOCATE 0,22:PRINT "By Thomas Glufke ( Twitter @plsql )"
240 LOCATE 20,6: PRINT "-----------------"
250 LOCATE 2,5
260 N=1
270 LINEINPUT "www.instagram.com/";U1$
280 IF U1$="" THEN COLOR 15,4,4:CLS:KEY ON:WIDTH 80:END
290 F$=""
300 IF MID$(U1$,1,1)="#" THEN U$=MID$(U1$,2):T$="t":GOTO 330
310 IF MID$(U1$,1,1)<>"#" THEN U$=U1$:T$="u"
320 F$=""
330 LOCATE 14,10:PRINT "Loading..."
340 E$=A$+"&u="
350 E1$=E$+U$
360 E1$=E1$+"&v="
370 E1$=E1$+MID$(STR$(VE),2)
380 E2$=E1$+F$+"&t="
390 E3$=E2$+T$
400 F$=E3$
410 F$=F$+"&n="+MID$(STR$(N),2)
420 Y$=""
440 GOSUB 760
510 IF PEEK(&HFCAF)<>0 AND VA=VE THEN GOTO 540
520 IF VE=2 THEN COLOR 1,15,15:SCREEN 8:COLOR 1,255,255
530 IF VE=1 THEN COLOR 1,15,15:SCREEN 2:COLOR 1,15,15
540 V$="http://"+SV$
541 V$=V$+":"
542 V$=V$+SP$
543 V$=V$+"/instagr8/server"
550 CALL NETBLOAD(V$+"/img/out"+S$+".CHR")
560 CALL NETBTOV(0,0)
580 IF VE=1 THEN CALL NETBLOAD(V$+"/img/out"+S$+".CLR"):CALL NETBTOV(0,0)
700 K$=INPUT$(1)
710 VA=VE
720 IF ASC(K$)=28 THEN N=N+1:GOTO 320
730 IF ASC(K$)=27 THEN RUN
740 IF K$="1" THEN VE=1:GOTO 290
750 IF K$="2" AND PEEK(&H2D)>0 THEN VE=2:GOTO 290
760 CALL NETSETHOST( SV$ )
770 CALL NETSETPORT( VAL(SP$) )
780 CALL NETSETPATH(F$)
790 OPEN"HTTPA:f$"AS#1
800 IF NOT EOF(1) THEN INPUT#1,F$
810 Y$=Y$+F$
820 IF EOF(1) THEN CLOSE:RETURN
